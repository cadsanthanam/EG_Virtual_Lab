<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Virtual Lab - Projections of Solids</title>
    <!-- Reference solids CSS (now a sibling file) -->
    <link rel="stylesheet" href="styles.css">
    <!-- Iframe-context overrides: hide redundant chrome, optimize layout for embedded use -->
    <style>
        .header {
            display: none;
        }

        .footer {
            display: none;
        }

        .main-container {
            height: 100vh;
            /* Fill entire iframe, not calc(100vh-140px) */
        }

        .input-panel {
            width: 22%;
            /* Wider for legibility in iframe context */
        }

        .canvas-area {
            width: 78%;
        }

        .input-section {
            padding: 0.75rem;
        }

        .input-group {
            margin-bottom: 0.75rem;
        }

        .panel-header {
            padding: 0.75rem;
        }

        .panel-header h2 {
            font-size: 1rem;
        }

        .button-group {
            margin-top: 1rem;
            margin-bottom: 0.75rem;
        }

        .dynamic-inputs {
            padding-top: 0.75rem;
            margin-top: 0.75rem;
        }

        .info-box {
            padding: 0.75rem;
            margin-top: 0.75rem;
        }
    </style>
</head>

<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <h1>Virtual Lab - Projections of Solids</h1>
            <p class="subtitle">First Angle Projection System</p>
        </div>
    </header>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Left Sidebar - User Input Section -->
        <aside class="input-panel">
            <div class="panel-header">
                <h2>Input Parameters</h2>
            </div>

            <div class="input-section">
                <!-- Solid Selection -->
                <div class="input-group">
                    <label for="solidType">Select Solid:</label>
                    <select id="solidType" class="input-field">
                        <option value="">-- Select Solid --</option>
                        <option value="triangular-prism">Triangular Prism</option>
                        <option value="square-prism">Square Prism</option>
                        <option value="pentagonal-prism">Pentagonal Prism</option>
                        <option value="hexagonal-prism">Hexagonal Prism</option>
                        <option value="triangular-pyramid">Triangular Pyramid</option>
                        <option value="square-pyramid">Square Pyramid</option>
                        <option value="pentagonal-pyramid">Pentagonal Pyramid</option>
                        <option value="hexagonal-pyramid">Hexagonal Pyramid</option>
                        <option value="cone">Cone</option>
                        <option value="cylinder">Cylinder</option>
                    </select>
                </div>

                <!-- Case Selection -->
                <div class="input-group">
                    <label for="caseType">Select Case:</label>
                    <select id="caseType" class="input-field">
                        <option value="">-- Select Case --</option>
                        <option value="A">Case A - Axis ⊥ HP</option>
                        <option value="B">Case B - Axis ⊥ VP</option>
                        <option value="C">Case C - Axis Inclined to HP</option>
                        <option value="D">Case D - Axis Inclined to VP</option>
                    </select>
                </div>

                <!-- Dynamic Input Fields Container -->
                <div id="dynamicInputs" class="dynamic-inputs">
                    <!-- Common Parameters -->
                    <div class="input-group">
                        <label for="baseEdge">Base Edge Length (mm):</label>
                        <input type="number" id="baseEdge" class="input-field" min="10" max="100" value="40"
                            placeholder="40">
                    </div>

                    <div class="input-group">
                        <label for="axisLength">Axis Length (mm):</label>
                        <input type="number" id="axisLength" class="input-field" min="20" max="150" value="80"
                            placeholder="80">
                    </div>

                    <!-- Case-specific inputs will be added dynamically -->
                    <div id="caseSpecificInputs"></div>
                </div>

                <!-- Action Buttons -->
                <div class="button-group">
                    <button id="generateBtn" class="btn btn-primary">Generate Projection</button>
                    <button id="resetBtn" class="btn btn-secondary">Reset</button>
                </div>

                <!-- Info Section -->
                <div class="info-box">
                    <h3>Quick Guide</h3>
                    <ul>
                        <li><strong>Case A:</strong> Axis perpendicular to HP (True shape in TV)</li>
                        <li><strong>Case B:</strong> Axis perpendicular to VP (True shape in FV)</li>
                        <li><strong>Case C:</strong> Axis inclined to HP</li>
                        <li><strong>Case D:</strong> Axis inclined to VP</li>
                    </ul>
                </div>
            </div>
        </aside>

        <!-- Right Side - Canvas Area -->
        <main class="canvas-area">
            <!-- Canvas Controls -->
            <div class="canvas-controls">
                <div class="control-group">
                    <button id="zoomInBtn" class="control-btn" title="Zoom In">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <circle cx="11" cy="11" r="8"></circle>
                            <line x1="11" y1="8" x2="11" y2="14"></line>
                            <line x1="8" y1="11" x2="14" y2="11"></line>
                            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                        </svg>
                        Zoom In
                    </button>
                    <button id="zoomOutBtn" class="control-btn" title="Zoom Out">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <circle cx="11" cy="11" r="8"></circle>
                            <line x1="8" y1="11" x2="14" y2="11"></line>
                            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                        </svg>
                        Zoom Out
                    </button>
                    <button id="panBtn" class="control-btn" title="Pan">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M5 9l-3 3 3 3M9 5l3-3 3 3M15 19l-3 3-3-3M19 9l3 3-3 3M2 12h20M12 2v20"></path>
                        </svg>
                        Pan
                    </button>
                    <button id="resetViewBtn" class="control-btn" title="Reset View">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"></path>
                            <path d="M21 3v5h-5"></path>
                            <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"></path>
                            <path d="M3 21v-5h5"></path>
                        </svg>
                        Reset
                    </button>
                </div>

                <div class="step-controls">
                    <button id="prevStepBtn" class="control-btn" title="Previous Step">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <polyline points="15 18 9 12 15 6"></polyline>
                        </svg>
                        Previous
                    </button>
                    <span id="stepIndicator" class="step-indicator">Step 0 / 0</span>
                    <button id="nextStepBtn" class="control-btn" title="Next Step">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <polyline points="9 18 15 12 9 6"></polyline>
                        </svg>
                        Next
                    </button>
                </div>
            </div>

            <!-- Instruction Display Area -->
            <div class="instruction-panel">
                <div class="instruction-content">
                    <h3 id="instructionTitle">Welcome to Virtual Lab</h3>
                    <p id="instructionText">Select a solid and case type from the left panel to begin. The step-by-step
                        procedure will guide you through drawing projections of solids using the first angle projection
                        system.</p>
                </div>
            </div>

            <!-- Drawing Canvas -->
            <div class="canvas-container">
                <canvas id="drawingCanvas"></canvas>
            </div>
        </main>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <p>&copy; 2024 Virtual Lab - Projections of Solids | First Angle Projection System</p>
    </footer>

    <!-- Core infrastructure: state, config, utilities, event handlers -->
    <script src="core.js"></script>
    <!-- Case-specific drawing functions (load after core.js) -->
    <script src="caseA.js"></script>
    <script src="caseB.js"></script>
    <script src="caseC.js"></script>
    <script src="caseD.js"></script>
</body>

</html>